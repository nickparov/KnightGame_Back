"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[826],{8361:(e,n,t)=>{var r;t.d(n,{Z:()=>o});const o=(r=[{url:"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",type:"link"},{url:"./assets/main.css",type:"link"}],{load:function(e){var n;(n=r.map((function(e){return n=e.url,t=e.type,new Promise((function(e,r){if("script"!==t&&"link"!==t)throw"not a valid type for load func!";var o=document.createElement(t);"script"===t&&(o.src=n),"link"===t&&(o.setAttribute("rel","stylesheet"),o.setAttribute("href",n)),o.addEventListener("load",(function(){e(!0)})),document.head.appendChild(o)}));var n,t})),n.reduce((function(e,n){return e.then((function(){return n.then((function(e){return!0}))}))}),Promise.resolve([]))).then((function(n){console.log("Done loading Core!"),e&&e()}))}})},2521:(e,n,t)=>{t.d(n,{QD:()=>r,u_:()=>f,Kr:()=>s});const r={login:function(){var e={username:prompt("Your Username:","test"),password:prompt("Your Password:","test")};fetch("/auth/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){!0===e.redirected&&(document.location.href=e.url)})).catch((function(e){return console.error(e)}))},logout:function(){document.location.href="/auth/logout"},register:function(){var e=document.getElementById("password").value,n=document.getElementById("username").value;fetch("/auth/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({username:e,password:n})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return e.json()}))}};function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const s=new function e(){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"state",{}),c(this,"set",(function(e){n.state=i(i({},n.state),e),n.fire(n.state)})),c(this,"get",(function(){return n.state})),c(this,"subscribers",[]),c(this,"subscribeAll",(function(e){var t,r=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.fn,c=a.that;n.subscribe(i,c)}}catch(e){r.e(e)}finally{r.f()}})),c(this,"subscribe",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.subscribers.push({fn:e,that:t})})),c(this,"fire",(function(e){n.subscribers.forEach((function(n){var t=n.fn,r=n.that;t.call(r,e)}))}))};var u,l=t(8563);u="#loader_wrapper",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?l(u).fadeOut("slow",e):l(u).fadeOut("slow")}();var d=t(8563),f=function(){var e={isOpened:!1},n={ModalContent:"#ModalContent",ModalContainer:".modal_container",CloseModalBtn:".closeModalBtn",ModalTitle:"#modalTitle",ModalBtns:"#ModalBtns",Modal:"#modal"};function t(n){if("boolean"!=typeof n)throw new Error("Invalid type was passed to _setIsOpened function!!!");e.isOpened=!e.isOpened}function r(){d(n.ModalTitle).html(""),d(n.ModalContent).html(""),d(n.ModalBtns).html(""),a()}function o(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];d(n.ModalContainer).fadeOut(700,(function(){t(!1),(e||r)&&("function"!=typeof e||r?e.apply(r,Array.prototype.slice.apply(arguments,[2,arguments.length-1])):e())}))}function a(){d(n.Modal).hasClass("d-flex flex-column justify-content-center")&&d(n.Modal).removeClass("d-flex flex-column justify-content-center"),d(n.ModalContent).hasClass("d-flex flex-column justify-content-center align-items-center")&&d(n.ModalContent).removeClass("d-flex flex-column justify-content-center align-items-center"),d(n.ModalBtns).hasClass("d-flex justify-content-center flex-row")&&d(n.ModalBtns).removeClass("d-flex justify-content-center flex-row")}return d(n.ModalContainer).hide(),d("body").on("click",n.CloseModalBtn,(function(){o(r)})),!d(n.Modal).hasClass("p-4")&&d(n.Modal).addClass("p-4"),{hide:o,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d(n.ModalContainer).fadeIn(700,(function(){t(!0),"function"==typeof e&&e()}))},clearModal:r,populateModal:function(e,t,r){d(n.ModalTitle).html(e),d(n.ModalContent).html(t),d(n.ModalBtns).html(r)},getSelectors:function(){return n},hideAndClear:function(){d(n.ModalContainer).fadeOut(700,(function(){t(!1),r()}))},addAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o='\n      <div class="alert alert-'.concat(e,' alert-dismissible fade show" role="alert">\n        <strong>').concat(t,"</strong> ").concat(r,'\n        <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      ');d(n.ModalContent).prepend(o)},applyStyle:a}}()},3652:(e,n,t)=>{t(1283),t(7588);var r,o=t(8361),a=t(2521),i=(r={heroesContainer:document.getElementById("heroes-container")},{display:function(e){console.log(e),r.heroesContainer.innerHTML="",r.heroesContainer.insertAdjacentHTML("beforeend",e.map((function(e){return'\n    <div class="single-hero-box col-lg-3 col-md-6 col-sm-12">\n        <img src=\''.concat((n=e).image,'\' class="img-thumbnail"/>\n        <p>').concat(n.name,"</p>\n        <small>").concat(n.is_available?"Resting at home...":"Having an adventure...","</small>\n    </div>");var n})).join(""))}}),c=function(){var e={itemsContainer:document.getElementById("items-container")};return{displayItems:function(n){e.itemsContainer.innerHTML="";var t=n.map((function(e){return t=(n=e).image,r=n.story,o=n.rarity,'\n            <div class="col-lg-2 col-sm-3 col-xs-6 mb-4">\n                <div class="'.concat(o," single-item-box p-4\">\n                    <img src='").concat(t,'\' class="img-thumbnail"/>\n                    <p><i>').concat(r.substr(0,50),"...</i></p>\n                </div>\n            </div>");var n,t,r,o}));e.itemsContainer.insertAdjacentHTML("beforeend","".concat(t.join("\n")))}}}(),s=function(){var e={usernameInput:document.getElementById("usernameInput")};return{display:function(e){var n=e.username;document.getElementById("WelcomeHeader").textContent="Welcome! \n".concat(n)},getUsername:function(){return e.usernameInput.value},setUsername:function(n){e.usernameInput.value=n}}}();function u(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const l=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t;return n=e,(t=[{key:"stateChanged",value:function(e){var n=e.profile,t=e.items,r=e.heroes;t&&this.itemsHandler(t),n&&this.profileHandler(n),r&&this.heroesHandler(r)}},{key:"profileHandler",value:function(e){console.log(e),s.display(e),s.setUsername(e.username)}},{key:"itemsHandler",value:function(e){c.displayItems(e)}},{key:"heroesHandler",value:function(e){i.display(e)}}])&&u(n.prototype,t),e}());function d(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){d(a,r,o,i,c,"next",e)}function c(e){d(a,r,o,i,c,"throw",e)}i(void 0)}))}}var p={sendHero:function(e){return h.apply(this,arguments)}};function h(){return(h=f(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/game/user/heroes/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=t(8563);function v(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function y(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){v(a,r,o,i,c,"next",e)}function c(e){v(a,r,o,i,c,"throw",e)}i(void 0)}))}}function g(){return(g=y(regeneratorRuntime.mark((function e(n){var t,r,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.Kr.get(),r=t.profile,o=r.id,i=m(n.target).data("record_id"),c={user_id:o,hero_record_id:i},e.next=6,p.sendHero(c);case 6:return e.sent,a.u_.hideAndClear(),e.next=10,fetch("/game/user/items");case 10:return s=e.sent,e.next=13,s.json();case 13:u=e.sent,a.Kr.set({items:u});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const b=function(e){var n=a.Kr.get().heroes;console.log(n),a.u_.clearModal();var t='\n        <div class="row">\n            '.concat(n.map((function(e){return'\n    <div class="col-lg-3">\n        <p class="hero-name-p" data-record_id="'.concat((n=e).hero_record_id,'">').concat(n.name,"</p>\n    </div>");var n})).join(""),"\n        </div>\n    ");a.u_.populateModal("Select Hero to Send",t,""),a.u_.show()},w=function(e){return g.apply(this,arguments)};function x(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function C(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}function j(){return(j=C(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/profile",{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",referrerPolicy:"no-referrer"});case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=C(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/profile",{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 2:return t=e.sent,r=t.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const O={_delete:function(){return j.apply(this,arguments)},update:function(e){return M.apply(this,arguments)}};function B(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function P(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){B(a,r,o,i,c,"next",e)}function c(e){B(a,r,o,i,c,"throw",e)}i(void 0)}))}}function k(){return(k=P(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={newUsername:s.getUsername()},e.next=3,O.update(t);case 3:r=e.sent,a.Kr.set({profile:r});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=P(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O._delete();case 3:t=e.sent,document.location.href=t.redirectUrl;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const I=function(e){return k.apply(this,arguments)},T=function(e){return E.apply(this,arguments)};var H,S=t(8563);function _(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){_(a,r,o,i,c,"next",e)}function c(e){_(a,r,o,i,c,"throw",e)}i(void 0)}))}}function R(){return(R=A(regeneratorRuntime.mark((function e(){var n,t,r,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.Z.load(),e.next=3,fetch("/profile");case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,e.next=9,fetch("/game/user/items");case 9:return r=e.sent,e.next=12,r.json();case 12:return i=e.sent,console.log(i),e.next=16,fetch("/game/user/heroes");case 16:return c=e.sent,e.next=19,c.json();case 19:s=e.sent,a.Kr.set({items:i,profile:t,heroes:s});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(H={logoutBtn:document.getElementById("logoutBtn"),updateBtn:document.getElementById("updateBtn"),deleteBtn:document.getElementById("deleteBtn"),sendHeroBtn:document.getElementById("sendHeroBtn")}).logoutBtn.addEventListener("click",a.QD.logout),H.updateBtn.addEventListener("click",I),H.deleteBtn.addEventListener("click",T),H.sendHeroBtn.addEventListener("click",b),S("body").on("click",".hero-name-p",w),a.Kr.subscribe(l.stateChanged,l),function(){R.apply(this,arguments)}()}},e=>{e.O(0,[563,652],(()=>(3652,e(e.s=3652)))),e.O()}]);