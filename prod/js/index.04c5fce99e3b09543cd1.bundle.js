"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[826],{8361:(e,n,t)=>{var r;t.d(n,{Z:()=>o});const o=(r=[{url:"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",type:"link"},{url:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css",type:"link"},{url:"./assets/main.css",type:"link"}],{load:function(e){var n;(n=r.map((function(e){return n=e.url,t=e.type,new Promise((function(e,r){if("script"!==t&&"link"!==t)throw"not a valid type for load func!";var o=document.createElement(t);"script"===t&&(o.src=n),"link"===t&&(o.setAttribute("rel","stylesheet"),o.setAttribute("href",n)),o.addEventListener("load",(function(){e(!0)})),document.head.appendChild(o)}));var n,t})),n.reduce((function(e,n){return e.then((function(){return n.then((function(e){return!0}))}))}),Promise.resolve([]))).then((function(n){console.log("Done loading Core!"),e&&e()}))}})},1696:(e,n,t)=>{t.d(n,{q:()=>r});var r={getNowSeconds:function(){return Math.round((new Date).getTime()/1e3)},getRemainingHours:function(e){return Math.round((e-r.getNowSeconds())/60/60)},getRemainingMinutes:function(e){return Math.round((e-r.getNowSeconds())/60)},getRemainingSeconds:function(e){return Math.round(e-r.getNowSeconds())},stillInAdventure:function(e){return Math.round(e-r.getNowSeconds())>0}}},2521:(e,n,t)=>{t.d(n,{QD:()=>r,u_:()=>f,Kr:()=>s});const r={login:function(){var e={username:prompt("Your Username:","test"),password:prompt("Your Password:","test")};fetch("/auth/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){!0===e.redirected&&(document.location.href=e.url)})).catch((function(e){return console.error(e)}))},logout:function(){document.location.href="/auth/logout"},register:function(){var e=document.getElementById("password").value,n=document.getElementById("username").value;fetch("/auth/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({username:e,password:n})}).then((function(e){return e.json()})).then((function(e){e.error?(f.clearModal(),f.populateModal("Error","Server responded with: <u>".concat(e.error,"</u>"),""),f.show()):(f.clearModal(),f.populateModal("Notification","You have been successfully registered!",""),f.show())})).catch((function(e){return e.json()}))}};function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const s=new function e(){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"state",{}),c(this,"set",(function(e){n.state=i(i({},n.state),e),n.fire(n.state)})),c(this,"get",(function(){return n.state})),c(this,"subscribers",[]),c(this,"subscribeAll",(function(e){var t,r=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.fn,c=a.that;n.subscribe(i,c)}}catch(e){r.e(e)}finally{r.f()}})),c(this,"subscribe",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.subscribers.push({fn:e,that:t})})),c(this,"fire",(function(e){n.subscribers.forEach((function(n){var t=n.fn,r=n.that;t.call(r,e)}))}))};var u,l=t(8563);u="#loader_wrapper",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?l(u).fadeOut("slow",e):l(u).fadeOut("slow")}();var d=t(8563),f=function(){var e={isOpened:!1},n={ModalContent:"#ModalContent",ModalContainer:".modal_container",CloseModalBtn:".closeModalBtn",ModalTitle:"#modalTitle",ModalBtns:"#ModalBtns",Modal:"#modal"};function t(n){if("boolean"!=typeof n)throw new Error("Invalid type was passed to _setIsOpened function!!!");e.isOpened=!e.isOpened}function r(){d(n.ModalTitle).html(""),d(n.ModalContent).html(""),d(n.ModalBtns).html(""),a()}function o(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];d(n.ModalContainer).fadeOut(700,(function(){t(!1),(e||r)&&("function"!=typeof e||r?e.apply(r,Array.prototype.slice.apply(arguments,[2,arguments.length-1])):e())}))}function a(){d(n.Modal).hasClass("d-flex flex-column justify-content-center")&&d(n.Modal).removeClass("d-flex flex-column justify-content-center"),d(n.ModalContent).hasClass("d-flex flex-column justify-content-center align-items-center")&&d(n.ModalContent).removeClass("d-flex flex-column justify-content-center align-items-center"),d(n.ModalBtns).hasClass("d-flex justify-content-center flex-row")&&d(n.ModalBtns).removeClass("d-flex justify-content-center flex-row")}return d(n.ModalContainer).hide(),d("body").on("click",n.CloseModalBtn,(function(){o(r)})),!d(n.Modal).hasClass("p-4")&&d(n.Modal).addClass("p-4"),{hide:o,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d(n.ModalContainer).fadeIn(700,(function(){t(!0),"function"==typeof e&&e()}))},clearModal:r,populateModal:function(e,t,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];o?d(n.CloseModalBtn).show():d(n.CloseModalBtn).hide(),d(n.ModalTitle).html(e),d(n.ModalContent).html(t),d(n.ModalBtns).html(r)},getSelectors:function(){return n},hideAndClear:function(){d(n.ModalContainer).fadeOut(700,(function(){t(!1),r()}))},addAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o='\n      <div class="alert alert-'.concat(e,' alert-dismissible fade show" role="alert">\n        <strong>').concat(t,"</strong> ").concat(r,'\n        <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      ');d(n.ModalContent).prepend(o)},applyStyle:a,isOpened:function(){return e.isOpened}}}();t(1696)},4814:(e,n,t)=>{t(1283),t(7588);var r=t(8361),o=t(2521);function a(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}var c={sendHero:function(e){return u.apply(this,arguments)},claimHero:function(e){return l.apply(this,arguments)},fetchRandomHeroes:function(){return s.apply(this,arguments)},buyHero:function(e){return d.apply(this,arguments)}};function s(){return s=i(regeneratorRuntime.mark((function e(){var n,t,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:3,e.next=3,fetch("/game/user/heroes/random?num=".concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){return(u=i(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/game/user/heroes/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/game/user/heroes/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=i(regeneratorRuntime.mark((function e(n){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={hero_id:n},e.next=3,fetch("/game/user/heroes/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){f(a,r,o,i,c,"next",e)}function c(e){f(a,r,o,i,c,"throw",e)}i(void 0)}))}}var m={sellItem:function(e){return h.apply(this,arguments)},buyItem:function(e){return v.apply(this,arguments)},fetchRandomItems:function(){return y.apply(this,arguments)}};function h(){return(h=p(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/game/user/items/sell",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=p(regeneratorRuntime.mark((function e(n){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={record_id:n},e.next=3,fetch("/game/user/items/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return y=p(regeneratorRuntime.mark((function e(){var n,t,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:3,e.next=3,fetch("/game/user/items/random?num=".concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}var g,b=t(1696),w=t(8563),x=(g={usernameInput:document.getElementById("usernameInput"),moneyBtn:w("#moneyBtn")},{display:function(e){var n=e.username,t=e.money;document.getElementById("WelcomeHeader").textContent="Welcome! \n".concat(n),g.moneyBtn.html("".concat(t,' <i class="bi bi-coin"></i>'))},getUsername:function(){return g.usernameInput.value},setUsername:function(e){g.usernameInput.value=e}});function _(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const M=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t;return n=e,(t=[{key:"reload",value:function(){var e=[fetch("/profile"),fetch("/game/user/items"),fetch("/game/user/heroes")];Promise.all(e).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){o.Kr.set({items:e[1],profile:e[0],heroes:e[2]})})).catch((function(e){return console.error(e)}))}},{key:"refetchHeroes",value:function(){fetch("/game/user/heroes").then((function(e){return e.json()})).then((function(e){o.Kr.set({heroes:e})}))}},{key:"refetchItems",value:function(){fetch("/game/user/items").then((function(e){return e.json()})).then((function(e){o.Kr.set({items:e})}))}},{key:"refetchProfile",value:function(){fetch("/profile").then((function(e){return e.json()})).then((function(e){o.Kr.set({profile:e})}))}},{key:"stateChanged",value:function(e){var n=e.profile,t=e.items,r=e.heroes;t&&this.itemsHandler(t),n&&this.profileHandler(n),r&&this.heroesHandler(r)}},{key:"profileHandler",value:function(e){x.display(e),x.setUsername(e.username)}},{key:"itemsHandler",value:function(e){R.displayItems(e)}},{key:"heroesHandler",value:function(e){k.display(e)}}])&&_(n.prototype,t),e}());var I=t(8563),k=function(){var e={heroesContainer:document.getElementById("heroes-container")};return{display:function(n){e.heroesContainer.innerHTML="",e.heroesContainer.insertAdjacentHTML("beforeend",n.map((function(e){return'\n    <div class="single-hero-box col-lg-3 col-md-6 col-sm-12">\n        <div class="hero-box-inner-details">\n            <img src=\''.concat((o=e).image,'\' class="img-thumbnail"/>\n            <p>').concat(o.name,"</p>\n            <small>").concat((n=o,t=n.is_available,r=n.arrivalSeconds,t?"Resting at home...":!t&&b.q.stillInAdventure(r)?"Having an adventure...":"Waiting for you..."),'</small>\n        </div>\n        <div class="d-grid gap-2 mt-2">\n            ').concat(function(e){if(0===e.is_available&&b.q.stillInAdventure(e.arrivalSeconds)){var n="".concat(e.hero_record_id,"_user_hero"),t=setInterval((function(){b.q.stillInAdventure(e.arrivalSeconds)?I("#".concat(n)).text("Arrives in ".concat(b.q.getRemainingSeconds(e.arrivalSeconds)," seconds...")):(M.refetchHeroes(),clearInterval(t))}),1e3);return'<button class="btn btn-warning disabled" id="'.concat(n,'" data-record_id="').concat(e.hero_record_id,'" type="button">Arrives in ').concat(b.q.getRemainingSeconds(e.arrivalSeconds)," seconds...</button>")}return 0!==e.is_available||b.q.stillInAdventure(e.arrivalSeconds)?' <button class="btn btn-warning sendHeroBtn" data-record_id="'.concat(e.hero_record_id,'" type="button">Send</button>'):'<button class="btn btn-warning claimHeroBtn" data-record_id="'.concat(e.hero_record_id,'" type="button">Claim Bounty</button>')}(o),"\n        </div>\n    </div>");var n,t,r,o})).join("")),e.heroesContainer.insertAdjacentHTML("beforeend",'<div class="single-hero-box col-lg-3 col-md-6 col-sm-12" id="addHeroBtn"><div class="hero-box-inner-details h-100"><i class="bi bi-plus-square" style="font-size: 3em;color: #ffc107;"></i></div></div>')},HeroHtml:{heroTraderHTML:function(e){return'<div class="single-hero-box col-md-4">\n                <div class="hero-box-inner-details">\n                    <img src=\''.concat(e.image,'\' class="img-thumbnail"/>\n                    <p>').concat(e.name,'</p>\n                </div>\n                <div class="d-grid gap-2 mt-2">\n                    <button class="btn btn-warning buyHeroBtn" data-hero_id="').concat(e.id,'"><i class="bi bi-coin"></i> ').concat(e.price,"</button>\n                </div>\n            </div>")}}}}();function H(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function j(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){H(a,r,o,i,c,"next",e)}function c(e){H(a,r,o,i,c,"throw",e)}i(void 0)}))}}var C=function(){function e(){return(e=j(regeneratorRuntime.mark((function e(){var n,t,r,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n='<div class="d-flex flex-row">Trader <i style="margin-left: 10px" id="reloadTraderItemsBtn" class="bi bi-arrow-clockwise"></i></div>',e.next=3,m.fetchRandomItems(3);case 3:return r=e.sent,e.next=6,c.fetchRandomHeroes(3);case 6:a=e.sent,i=r.map((function(e){return R.ItemsHtml.itemTraderHTML(e)})).join(""),s=a.map((function(e){return k.HeroHtml.heroTraderHTML(e)})).join(""),t='\n            <div id="traderHeroes" class="row">'.concat(s,'</div>\n            <div id="traderItems" class="row mt-3">').concat(i,"</div>\n        "),o.u_.clearModal(),o.u_.populateModal(n,t,'<button class="btn btn-warning" id="okayBtn">Okay</button>'),o.u_.show();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=j(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.u_.isOpened(),o.u_.clearModal(),o.u_.populateModal("Error","".concat(n),"",!1),!t&&o.u_.show(),setTimeout(o.u_.hideAndClear,1500);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{HeroClaimed:function(e){var n=e.item,t=e.gold,r=[];t&&r.push(function(e){return"<p>Your hero brought ".concat(e,' <i class="bi bi-coin"></i></p>')}(t)),n&&r.push(R.ItemsHtml.singleItem(n,!0)),n||t||r.push("<h4>Your Hero didn't bring anything...<h4>"),o.u_.clearModal(),o.u_.populateModal("Your Bounty",r.join(""),'<button class="btn btn-warning" id="okayBtn">Okay</button>'),o.u_.show()},ItemInfo:function(e){var n,t;n=e.name,t=R.ItemsHtml.itemInfoHTML(e),o.u_.clearModal(),o.u_.populateModal(n,t,'<button class="btn btn-warning" id="okayBtn">Okay</button>'),o.u_.show()},showTraderWindow:function(){return e.apply(this,arguments)},showErrorMessage:function(e){return n.apply(this,arguments)},showWelcomeMessage:function(){o.u_.clearModal(),o.u_.populateModal("Welcome User!",'\n            <h3>Helpful Tips</h3>\n            <p class="mt-3 mb-0"><i class="bi bi-box-arrow-left" style="font-size:1.6em"></i> for logout.</p>\n            <p class="mb-0"><i class="bi bi-wrench" style="font-size:1.6em"></i> to edit your username.</p>\n            <p class="mb-0"><i class="bi bi-trash" style="font-size:1.6em"></i> to delete your account.</p>\n            <p class="mb-0"><i class="bi bi-coin" style="font-size:1.6em"></i> as a local currency.</p>\n            <p class="mb-0"><i class="bi bi-info-circle" style="font-size:1.6em"></i> for item information.</p>\n            <p class="mb-0 mt-5">Go ahead and have an adventure with your Hero!</p>\n        \n        ',""),o.u_.show()}}}(),B=t(8563),R=function(){var e={itemsContainer:document.getElementById("items-container")},n={singleItem:function(e){var n=e.image,t=e.story,r=e.rarity,o=e.price,a=(e.record_id,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a?'<div class="col-lg-4 col-sm-6 mb-4">\n                <div class="'.concat(r," single-item-box p-4\">\n                    <img src='").concat(n,'\' class="img-thumbnail"/>\n                </div>\n            </div>'):'\n            <div class="col-lg-3 col-md-6 mb-4">\n                <div class="'.concat(r," single-item-box p-4\">\n                    <img src='").concat(n,'\' class="img-thumbnail"/>\n                    <p><i>').concat(t?t.substr(0,50):"no story",'...</i></p>\n                    <div class="d-flex justify-content-between">\n                        <button class="btn btn-warning showItemInfoBtn" data-local_arr_idx="').concat(i,'">\n                            <i class="bi bi-info-circle"></i>\n                        </button>\n                        <button class="btn btn-warning sellItemBtn" data-local_arr_idx="').concat(i,'"  title="Sell">\n                            ').concat(o,' <i class="bi bi-coin"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>')},itemInfoHTML:function(e){var n=e.image,t=e.desc,r=e.rarity,o=e.price;return e.record_id,' \n                <div class="row p-4">\n                    <div class="col-md-4 d-flex justify-content-center align-items-center">\n                        <img src=\''.concat(n,'\' class="img-thumbnail"/>\n                    </div>\n                    <div class="col-md-8 d-flex justify-content-center flex-column">\n                        <p><i>').concat(t,"...</i></p>\n                        <p>Rarity: ").concat(r," </br> Price: ").concat(o,' <i class="bi bi-coin"></i></p>\n                    </div>\n                </div>')},itemTraderHTML:function(e){var n=e.image,t=(e.desc,e.rarity),r=e.price,o=e.id;return' \n                <div class="col-md-4 d-flex flex-column justify-content-center">\n                    <img src=\''.concat(n,'\' class="img-thumbnail"/>\n                    <p>Rarity: ').concat(t," </br> Price: ").concat(r,' <i class="bi bi-coin"></i></p>\n                    <button class="btn btn-warning buyItemBtn" data-record_id="').concat(o,'"><i class="bi bi-cart2"></i></button>\n                </div>\n            ')},itemsContainer:function(e){return"".concat(e.join("\n"))}};return{ItemsHtml:n,displayItems:function(t){e.itemsContainer.innerHTML="";var r=t.map((function(e,t){return n.singleItem(e,!1,t)}));e.itemsContainer.insertAdjacentHTML("beforeend",n.itemsContainer(r))},showItemInfo:function(e){var n=void 0===B(B(e.target).parent()).data("local_arr_idx")?B(B(e.target)).data("local_arr_idx"):B(B(e.target).parent()).data("local_arr_idx"),t=o.Kr.get().items[n];C.ItemInfo(t)}}}(),T=t(8563);function O(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function P(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){O(a,r,o,i,c,"next",e)}function c(e){O(a,r,o,i,c,"throw",e)}i(void 0)}))}}var S=function(){function e(){return(e=P(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.fetchRandomItems(3);case 2:return t=e.sent,e.next=5,c.fetchRandomHeroes(3);case 5:r=e.sent,T("#traderItems").html(t.map((function(e){return R.ItemsHtml.itemTraderHTML(e)})).join("")),T("#traderHeroes").html(r.map((function(e){return k.HeroHtml.heroTraderHTML(e)})).join(""));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=P(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),C.showTraderWindow();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{traderReloadBtnHandler:function(n){return e.apply(this,arguments)},traderBtnHandler:function(e){return n.apply(this,arguments)}}}(),E=t(8563);function A(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function L(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){A(a,r,o,i,c,"next",e)}function c(e){A(a,r,o,i,c,"throw",e)}i(void 0)}))}}function N(){return(N=L(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.showTraderWindow();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=L(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E(n.target).data("hero_id")?E(n.target).data("hero_id"):E(E(n.target).parent()).data("hero_id"),e.next=3,c.buyHero(t);case 3:e.sent.success?(o.u_.hideAndClear(),M.reload()):C.showErrorMessage("Not enough money!");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=L(regeneratorRuntime.mark((function e(n){var t,r,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.Kr.get(),r=t.profile,a=r.id,i=E(n.target).data("record_id"),s={user_id:a,hero_record_id:i},e.next=6,c.sendHero(s);case 6:e.sent,M.refetchHeroes();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=L(regeneratorRuntime.mark((function e(n){var t,r,a,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.Kr.get(),r=t.profile,a=r.id,i=E(n.target).data("record_id"),s={user_id:a,hero_record_id:i},e.next=6,c.claimHero(s);case 6:if((u=e.sent).success){e.next=9;break}return e.abrupt("return");case 9:C.HeroClaimed(u.data),M.reload();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const W=function(e){return K.apply(this,arguments)},q=function(e){return U.apply(this,arguments)},J=function(e){return D.apply(this,arguments)},z=function(e){return N.apply(this,arguments)};var Y=t(8563);function G(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function Q(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){G(a,r,o,i,c,"next",e)}function c(e){G(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Z(){return(Z=Q(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y(n.target).data("record_id")?Y(n.target).data("record_id"):Y(Y(n.target).parent()).data("record_id"),e.next=3,m.buyItem(t);case 3:e.sent,o.u_.hideAndClear(),M.refetchItems(),M.refetchProfile();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Q(regeneratorRuntime.mark((function e(n){var t,r,a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0===Y(Y(n.target).parent()).data("local_arr_idx")?Y(Y(n.target)).data("local_arr_idx"):Y(Y(n.target).parent()).data("local_arr_idx"),r=o.Kr.get().items[t],a=r.db_id,i=r.record_id,c={db_id:a,record_id:i},e.next=6,m.sellItem(c);case 6:e.sent.success||console.error("Error on the back when selling item!"),M.refetchItems(),M.refetchProfile();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const F=function(e){return $.apply(this,arguments)},V=function(e){return Z.apply(this,arguments)};function X(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function ee(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){X(a,r,o,i,c,"next",e)}function c(e){X(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ne(){return(ne=ee(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/profile",{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",referrerPolicy:"no-referrer"});case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=ee(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/profile",{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 2:return t=e.sent,r=t.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const re={_delete:function(){return ne.apply(this,arguments)},update:function(e){return te.apply(this,arguments)}};function oe(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function ae(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){oe(a,r,o,i,c,"next",e)}function c(e){oe(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ie(){return(ie=ae(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={newUsername:x.getUsername()},e.next=3,re.update(t);case 3:r=e.sent,o.Kr.set({profile:r});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=ae(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,re._delete();case 3:t=e.sent,document.location.href=t.redirectUrl;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const se=function(e){return ie.apply(this,arguments)},ue=function(e){return ce.apply(this,arguments)};var le,de,fe,pe=t(8563);function me(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}(le={logoutBtn:document.getElementById("logoutBtn"),updateBtn:document.getElementById("updateBtn"),deleteBtn:document.getElementById("deleteBtn"),traderBtn:pe("#traderBtn")}).logoutBtn.addEventListener("click",o.QD.logout),le.updateBtn.addEventListener("click",se),le.deleteBtn.addEventListener("click",ue),pe("body").on("click","button.sendHeroBtn",W),pe("body").on("click","button.claimHeroBtn",q),pe("body").on("click","button.buyHeroBtn",J),pe("body").on("click","#addHeroBtn",z),pe("body").on("click","button.showItemInfoBtn",R.showItemInfo),pe("body").on("click","button.sellItemBtn",F),pe("body").on("click","button.buyItemBtn",V),le.traderBtn.on("click",S.traderBtnHandler),pe("body").on("click","#reloadTraderItemsBtn",S.traderReloadBtnHandler),pe("body").on("click","#okayBtn",o.u_.hideAndClear),o.Kr.subscribe(M.stateChanged,M),(de=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.Z.load(),M.reload(),null===localStorage.getItem("first_time")&&(C.showWelcomeMessage(),localStorage.setItem("first_time","false"));case 3:case"end":return e.stop()}}),e)})),fe=function(){var e=this,n=arguments;return new Promise((function(t,r){var o=de.apply(e,n);function a(e){me(o,t,r,a,i,"next",e)}function i(e){me(o,t,r,a,i,"throw",e)}a(void 0)}))},function(){return fe.apply(this,arguments)})()}},e=>{e.O(0,[563,652],(()=>(4814,e(e.s=4814)))),e.O()}]);